
#驱动开发环境#

Windows驱动开发环境比应用程序开发要复杂一些，所需要的程序如下：

1. Visual Studio XXX
2. WDK
3. Windbg
4. 虚拟机软件（VMWare等）
5. 系统镜像（XP/Win7/Win10等）

开发环境首先需要编译环境，这里选择`Visual Studio`，它一方面可以方便程序编辑，另一方面可以进行驱动工程创建与编译。WDK是驱动开发必须的，就如同应用开发中的SDK一样。这两个不用多言，直接下载相应版本并且安装即可。

程序开发中很重要的一部分是程序测试与调试，这里需要搭建测试与调试环境。正常可以在本机进行测试，但是由于驱动中一旦出现错误很容易造成系统蓝屏，严重可能造成本机系统损坏，导致不必要的损失；如果要在实体机上进行调试，那就需要两台物理机器，这样成本比较大，并且如果驱动有问题也可能造成前面说的很多问题。所以安装虚拟机进行调试和测试是比较方便和明智的做法。安装了虚拟机可以使用双机调试的方式，用本机的Windbg调试虚拟机中的系统，进而可以可以调试驱动。

关于上述软件的安装以及虚拟机中的系统安装都是比较简单的事情，这里不再详细说明。下面说一下双机调试环境如何建立。



###串口连接双机###


###使用VirtualKD###

VirtualKD工具可以免去配置Windbg双击调试的琐碎配置，并且极大提高双击调试时的相应速度。

`VirtualKD`是开源的程序，可以从`VirtualKD`的主页（[http://virtualkd.sysprogs.org/](http://virtualkd.sysprogs.org/)）下载。

`VirtualKD`程序是自减压程序，直接放到指定目录即可。它其中包含一个`target`目录，将`target`目录放到虚拟机系统中，并运行。如下图所示，默认选项，直接点击`Install`即可。








By Andy@2018-11-12 20:09:23







